<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Your IP Address</title>
    <style>
      :root {
        --sky-top: #87ceeb;
        --sky-mid: #e0c9a6;
        --sky-bottom: #d4a574;
        --dune-light: #c9a882;
        --dune-mid: #b8956a;
        --dune-medium: #c4965f;
        --dune-dark: #a67c52;
        --dune-darker: #d4a574;
        --text-primary: #3d2817;
        --text-heading: #8b4513;
        --text-secondary: #6b4423;
        --text-link-hover: #a0522d;
        --container-bg: rgba(255, 248, 240, 0.85);
        --container-shadow: rgba(61, 40, 23, 0.3);
        --container-border: rgba(184, 149, 106, 0.3);
        --button-bg: rgba(184, 149, 106, 0.3);
        --button-border: rgba(139, 69, 19, 0.5);
        --button-text: #8b4513;
        --button-hover-bg: rgba(184, 149, 106, 0.5);
        --button-hover-border: rgba(139, 69, 19, 0.7);
        --button-hover-shadow: rgba(139, 69, 19, 0.3);
        --copied-bg: rgba(85, 107, 47, 0.3);
        --copied-border: rgba(85, 107, 47, 0.6);
        --copied-text: #556b2f;
        --ip-shadow-light: rgba(184, 149, 106, 0.4);
        --ip-shadow-dark: rgba(61, 40, 23, 0.2);
        --footer-border: rgba(184, 149, 106, 0.4);
        --link-shadow: rgba(184, 149, 106, 0.4);
      }

      body {
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        background: linear-gradient(
          to bottom,
          var(--sky-top) 0%,
          var(--sky-mid) 40%,
          var(--sky-bottom) 100%
        );
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-primary);
        position: relative;
        overflow: hidden;
      }
      body::before {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 60%;
        background: radial-gradient(
            ellipse 120% 100% at 20% bottom,
            var(--dune-light) 0%,
            var(--dune-mid) 30%,
            transparent 50%
          ),
          radial-gradient(
            ellipse 100% 80% at 60% bottom,
            var(--dune-darker) 0%,
            var(--dune-medium) 40%,
            transparent 60%
          ),
          radial-gradient(
            ellipse 110% 90% at 80% bottom,
            var(--sky-mid) 0%,
            var(--dune-darker) 50%,
            transparent 70%
          );
        clip-path: polygon(
          0 40%,
          15% 35%,
          30% 40%,
          45% 30%,
          60% 35%,
          75% 28%,
          90% 32%,
          100% 30%,
          100% 100%,
          0 100%
        );
      }
      body::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 45%;
        background: radial-gradient(
            ellipse 100% 70% at 10% bottom,
            var(--dune-mid) 0%,
            var(--dune-dark) 40%,
            transparent 60%
          ),
          radial-gradient(
            ellipse 90% 60% at 50% bottom,
            var(--dune-medium) 0%,
            var(--dune-mid) 50%,
            transparent 70%
          ),
          radial-gradient(
            ellipse 100% 65% at 85% bottom,
            var(--dune-darker) 0%,
            var(--dune-medium) 45%,
            transparent 65%
          );
        clip-path: polygon(
          0 50%,
          20% 45%,
          40% 50%,
          55% 42%,
          70% 48%,
          85% 40%,
          100% 45%,
          100% 100%,
          0 100%
        );
        opacity: 0.9;
      }
      .container {
        text-align: center;
        padding: 3rem;
        background: var(--container-bg);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        box-shadow: 0 8px 32px var(--container-shadow);
        border: 1px solid var(--container-border);
        max-width: 600px;
        width: 90%;
        position: relative;
        z-index: 1;
      }
      h1 {
        margin: 0 0 2rem;
        font-size: 1.5rem;
        font-weight: 300;
        letter-spacing: 2px;
        text-transform: uppercase;
        color: var(--text-heading);
        opacity: 0.9;
      }
      .ip-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        flex-wrap: wrap;
        margin: 1rem 0;
      }
      .ip {
        font-size: 3rem;
        font-weight: 700;
        font-family: "Courier New", monospace;
        letter-spacing: 2px;
        color: var(--text-heading);
        text-shadow: 0 2px 8px var(--ip-shadow-light),
          0 2px 4px var(--ip-shadow-dark);
        white-space: nowrap;
        cursor: pointer;
        filter: blur(13px);
        transition: filter 0.3s ease;
        user-select: none;
      }
      .ip.revealed {
        filter: blur(0);
      }
      .copy-btn {
        background: var(--button-bg);
        border: 1px solid var(--button-border);
        color: var(--button-text);
        padding: 0.5rem 1rem;
        border-radius: 8px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.2s;
        font-family: inherit;
        font-weight: 500;
      }
      .copy-btn:hover {
        background: var(--button-hover-bg);
        border-color: var(--button-hover-border);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px var(--button-hover-shadow);
      }
      .copy-btn:active {
        transform: translateY(0);
      }
      .copy-btn.copied {
        background: var(--copied-bg);
        border-color: var(--copied-border);
        color: var(--copied-text);
      }
      .subtitle {
        font-size: 0.9rem;
        color: var(--text-secondary);
        opacity: 0.9;
        margin-top: 2rem;
      }
      .plain-link {
        color: var(--text-heading);
      }
      .footer {
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 1px solid var(--footer-border);
        font-size: 0.85rem;
        color: var(--text-secondary);
        opacity: 0.8;
      }
      .footer-links {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        flex-wrap: wrap;
        margin-top: 0.5rem;
      }
      .footer-links a {
        color: var(--text-heading);
        text-decoration: none;
        transition: all 0.2s;
      }
      .footer-links a:hover {
        color: var(--text-link-hover);
        text-decoration: underline;
        text-shadow: 0 2px 4px var(--link-shadow);
      }
      .footer-link-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.25rem;
      }
      .footer-link-item a {
        font-weight: 500;
      }
      .footer-link-label {
        font-size: 0.75rem;
        opacity: 0.8;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Your IP Address</h1>
      <div class="ip-container">
        <div class="ip" id="ip-address">__IP_ADDRESS__</div>
        <button class="copy-btn" id="copy-btn" onclick="copyIP()">Copy</button>
      </div>
      <div class="subtitle">
        Click to reveal/hide. Visit
        <a href="/plain" class="plain-link" style="text-decoration: underline"
          >/plain</a
        >
        for plain text
      </div>
      <div class="footer">
        <div>Made by Jamon Holmgren</div>
        <div class="footer-links">
          <div class="footer-link-item">
            <a href="https://jamon.dev" target="_blank" rel="noopener"
              >jamon.dev</a
            >
            <span class="footer-link-label">Personal site</span>
          </div>
          <div class="footer-link-item">
            <a href="https://jammin.games" target="_blank" rel="noopener"
              >jammin.games</a
            >
            <span class="footer-link-label">Game dev</span>
          </div>
          <div class="footer-link-item">
            <a href="https://infinite.red" target="_blank" rel="noopener"
              >infinite.red</a
            >
            <span class="footer-link-label">React Native consultancy</span>
          </div>
        </div>
        <div
          id="color-seed"
          style="margin-top: 1rem; font-size: 0.75rem; opacity: 0.7"
        ></div>
      </div>
    </div>
    <script>
      function hexToHsl(hex) {
        const r = parseInt(hex.slice(1, 3), 16) / 255;
        const g = parseInt(hex.slice(3, 5), 16) / 255;
        const b = parseInt(hex.slice(5, 7), 16) / 255;

        const max = Math.max(r, g, b);
        const min = Math.min(r, g, b);
        let h,
          s,
          l = (max + min) / 2;

        if (max === min) {
          h = s = 0;
        } else {
          const d = max - min;
          s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
          switch (max) {
            case r:
              h = ((g - b) / d + (g < b ? 6 : 0)) / 6;
              break;
            case g:
              h = ((b - r) / d + 2) / 6;
              break;
            case b:
              h = ((r - g) / d + 4) / 6;
              break;
          }
        }

        return [Math.round(h * 360), Math.round(s * 100), Math.round(l * 100)];
      }

      function hslToHex(h, s, l) {
        l /= 100;
        const a = (s * Math.min(l, 1 - l)) / 100;
        const f = (n) => {
          const k = (n + h / 30) % 12;
          const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
          return Math.round(255 * color)
            .toString(16)
            .padStart(2, "0");
        };
        return `#${f(0)}${f(8)}${f(4)}`;
      }

      function rgba(r, g, b, a) {
        return `rgba(${Math.round(r)}, ${Math.round(g)}, ${Math.round(
          b
        )}, ${a})`;
      }

      function generateColorScheme(baseHex) {
        const [h, s, l] = hexToHsl(baseHex);
        const isDark = l < 50;

        // Use analogous colors (closer hues) with very low saturation for soft pastel sky
        const skyTopH = (h + 40) % 360;
        const skyMidH = (h + 20) % 360;
        const skyBottomH = (h + 10) % 360;

        // Very soft saturation (15-25%) and high lightness for pastel sky effect
        const skyTop = hslToHex(
          skyTopH,
          Math.max(10, Math.min(25, s * 0.2)),
          isDark ? 20 : 90
        );
        const skyMid = hslToHex(
          skyMidH,
          Math.max(15, Math.min(30, s * 0.25)),
          isDark ? 25 : 80
        );
        const skyBottom = hslToHex(
          skyBottomH,
          Math.max(20, Math.min(35, s * 0.3)),
          isDark ? 30 : 70
        );

        const duneLight = hslToHex(h, s, isDark ? 30 : 55);
        const duneMid = hslToHex(h, Math.min(100, s * 1.1), isDark ? 25 : 50);
        const duneMedium = hslToHex(
          h,
          Math.min(100, s * 1.2),
          isDark ? 20 : 45
        );
        const duneDark = hslToHex(h, Math.min(100, s * 1.1), isDark ? 15 : 40);
        const duneDarker = hslToHex(h, s, isDark ? 25 : 50);

        const accentH = h;
        const accentS = Math.min(100, s * 1.2);
        const accentL = isDark ? 60 : 40;

        const textPrimary = isDark ? "#e4e6eb" : "#1a1a1a";
        const textHeading = hslToHex(accentH, accentS, accentL);
        const textSecondary = hslToHex(
          accentH,
          Math.min(100, accentS * 0.8),
          isDark ? 70 : 35
        );
        const textLinkHover = hslToHex(accentH, accentS, isDark ? 75 : 50);

        const [r, g, b] = hexToHsl(textHeading).map((v, i) =>
          i === 0 ? v : v / 100
        );
        const containerR = isDark ? 20 : 255;
        const containerG = isDark ? 20 : 248;
        const containerB = isDark ? 30 : 240;
        const containerBg = rgba(containerR, containerG, containerB, 0.85);
        const containerShadow = isDark
          ? rgba(0, 0, 0, 0.5)
          : rgba(0, 0, 0, 0.2);

        const borderColor = hslToHex(accentH, accentS * 0.6, isDark ? 50 : 60);
        const [br, bg, bb] = [
          parseInt(borderColor.slice(1, 3), 16),
          parseInt(borderColor.slice(3, 5), 16),
          parseInt(borderColor.slice(5, 7), 16),
        ];
        const containerBorder = rgba(br, bg, bb, 0.3);

        const buttonColor = hslToHex(accentH, accentS * 0.7, isDark ? 50 : 60);
        const [butR, butG, butB] = [
          parseInt(buttonColor.slice(1, 3), 16),
          parseInt(buttonColor.slice(3, 5), 16),
          parseInt(buttonColor.slice(5, 7), 16),
        ];
        const buttonBg = rgba(butR, butG, butB, 0.2);
        const buttonBorder = rgba(butR, butG, butB, 0.5);
        const buttonText = textHeading;
        const buttonHoverBg = rgba(butR, butG, butB, 0.4);
        const buttonHoverBorder = rgba(butR, butG, butB, 0.7);
        const buttonHoverShadow = rgba(butR, butG, butB, 0.3);

        const copiedBg = rgba(76, 175, 80, 0.3);
        const copiedBorder = rgba(76, 175, 80, 0.6);
        const copiedText = "#66bb6a";

        const ipShadowLight = rgba(butR, butG, butB, 0.4);
        const ipShadowDark = isDark ? rgba(0, 0, 0, 0.5) : rgba(0, 0, 0, 0.2);
        const footerBorder = rgba(butR, butG, butB, 0.4);
        const linkShadow = rgba(butR, butG, butB, 0.4);

        return {
          skyTop,
          skyMid,
          skyBottom,
          duneLight,
          duneMid,
          duneMedium,
          duneDark,
          duneDarker,
          textPrimary,
          textHeading,
          textSecondary,
          textLinkHover,
          containerBg,
          containerShadow,
          containerBorder,
          buttonBg,
          buttonBorder,
          buttonText,
          buttonHoverBg,
          buttonHoverBorder,
          buttonHoverShadow,
          copiedBg,
          copiedBorder,
          copiedText,
          ipShadowLight,
          ipShadowDark,
          footerBorder,
          linkShadow,
        };
      }

      function getUrlParam(name) {
        const params = new URLSearchParams(window.location.search);
        return params.get(name);
      }

      function randomHex() {
        return (
          "#" +
          Math.floor(Math.random() * 16777215)
            .toString(16)
            .padStart(6, "0")
        );
      }

      let colorSeed = getUrlParam("color");
      if (!colorSeed || !/^[0-9a-fA-F]{6}$/.test(colorSeed)) {
        colorSeed = randomHex().slice(1);
      } else {
        colorSeed = colorSeed.toLowerCase();
      }

      const scheme = generateColorScheme("#" + colorSeed);
      applyColorScheme(scheme);

      const colorSeedElement = document.getElementById("color-seed");
      const currentUrl = new URL(window.location);
      currentUrl.searchParams.set("color", colorSeed);
      colorSeedElement.innerHTML = `Color seed: <a href="${currentUrl.toString()}" class="plain-link" style="text-decoration: underline;">#${colorSeed}</a>`;

      function applyColorScheme(scheme) {
        const root = document.documentElement;
        root.style.setProperty("--sky-top", scheme.skyTop);
        root.style.setProperty("--sky-mid", scheme.skyMid);
        root.style.setProperty("--sky-bottom", scheme.skyBottom);
        root.style.setProperty("--dune-light", scheme.duneLight);
        root.style.setProperty("--dune-mid", scheme.duneMid);
        root.style.setProperty("--dune-medium", scheme.duneMedium);
        root.style.setProperty("--dune-dark", scheme.duneDark);
        root.style.setProperty("--dune-darker", scheme.duneDarker);
        root.style.setProperty("--text-primary", scheme.textPrimary);
        root.style.setProperty("--text-heading", scheme.textHeading);
        root.style.setProperty("--text-secondary", scheme.textSecondary);
        root.style.setProperty("--text-link-hover", scheme.textLinkHover);
        root.style.setProperty("--container-bg", scheme.containerBg);
        root.style.setProperty("--container-shadow", scheme.containerShadow);
        root.style.setProperty("--container-border", scheme.containerBorder);
        root.style.setProperty("--button-bg", scheme.buttonBg);
        root.style.setProperty("--button-border", scheme.buttonBorder);
        root.style.setProperty("--button-text", scheme.buttonText);
        root.style.setProperty("--button-hover-bg", scheme.buttonHoverBg);
        root.style.setProperty(
          "--button-hover-border",
          scheme.buttonHoverBorder
        );
        root.style.setProperty(
          "--button-hover-shadow",
          scheme.buttonHoverShadow
        );
        root.style.setProperty("--copied-bg", scheme.copiedBg);
        root.style.setProperty("--copied-border", scheme.copiedBorder);
        root.style.setProperty("--copied-text", scheme.copiedText);
        root.style.setProperty("--ip-shadow-light", scheme.ipShadowLight);
        root.style.setProperty("--ip-shadow-dark", scheme.ipShadowDark);
        root.style.setProperty("--footer-border", scheme.footerBorder);
        root.style.setProperty("--link-shadow", scheme.linkShadow);
      }

      const ipElement = document.getElementById("ip-address");
      ipElement.addEventListener("click", function () {
        this.classList.toggle("revealed");
      });

      function copyIP() {
        const ipElement = document.getElementById("ip-address");
        const ip = ipElement.textContent.trim();
        const btn = document.getElementById("copy-btn");

        navigator.clipboard
          .writeText(ip)
          .then(() => {
            btn.textContent = "Copied!";
            btn.classList.add("copied");
            setTimeout(() => {
              btn.textContent = "Copy";
              btn.classList.remove("copied");
            }, 2000);
          })
          .catch(() => {
            const textArea = document.createElement("textarea");
            textArea.value = ip;
            textArea.style.position = "fixed";
            textArea.style.opacity = "0";
            document.body.appendChild(textArea);
            textArea.select();
            try {
              document.execCommand("copy");
              btn.textContent = "Copied!";
              btn.classList.add("copied");
              setTimeout(() => {
                btn.textContent = "Copy";
                btn.classList.remove("copied");
              }, 2000);
            } catch (err) {
              btn.textContent = "Failed";
            }
            document.body.removeChild(textArea);
          });
      }
    </script>
  </body>
</html>
